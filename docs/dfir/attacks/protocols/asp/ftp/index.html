<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>FTP and sFTP - Analyst</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://bakerst221b.com/favicon.png">
  <link href="/css/style-classic.css"></link>
  
  
  <link rel="stylesheet" href="/css/style.min.564b5f4faf3af87992cb8ab298314448914c22dbdb3f2f9c584546b21b8d407c.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home 🏡">
      <a href="/">
        <span>Home 🏡</span>
      </a>
    </li>
    
    <li class="menu-item-blog ✍️">
      <a href="/docs/blog">
        <span>Blog ✍️</span>
      </a>
    </li>
    
    <li class="menu-item-dfir 🔍">
      <a href="/docs/dfir">
        <span>DFIR 🔍</span>
      </a>
    </li>
    
    <li class="menu-item-crypto 🗝️">
      <a href="/docs/cryptography">
        <span>Crypto 🗝️</span>
      </a>
    </li>
    
    <li class="menu-item-toolkit 🧰">
      <a href="/docs/toolkit">
        <span>Toolkit 🧰</span>
      </a>
    </li>
    
    <li class="menu-item-about me 🧝🏽‍♀️">
      <a href="/docs/about">
        <span>About me 🧝🏽‍♀️</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://bakerst221b.com"><img alt="Logo" src="/images/logo.png" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://bakerst221b.com"><img alt="Logo" src="/images/logo-mobile.svg" /></a>
    </div>
    

    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home 🏡">
      <a href="/">
        <span>Home 🏡</span>
      </a>
    </li>
    
    <li class="menu-item-blog ✍️">
      <a href="/docs/blog">
        <span>Blog ✍️</span>
      </a>
    </li>
    
    <li class="menu-item-dfir 🔍">
      <a href="/docs/dfir">
        <span>DFIR 🔍</span>
      </a>
    </li>
    
    <li class="menu-item-crypto 🗝️">
      <a href="/docs/cryptography">
        <span>Crypto 🗝️</span>
      </a>
    </li>
    
    <li class="menu-item-toolkit 🧰">
      <a href="/docs/toolkit">
        <span>Toolkit 🧰</span>
      </a>
    </li>
    
    <li class="menu-item-about me 🧝🏽‍♀️">
      <a href="/docs/about">
        <span>About me 🧝🏽‍♀️</span>
      </a>
    </li>
    
  </ul>
</div>
    
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
    
    <div style="margin-left: 20pt;">
      <a href="/index.xml" type="application/rss+xml">
        <img src="/images/rss.png" alt="RSS Feed">
      </a>
    </div>
    
    <style>
      a[href="/index.xml"] {
        display: inline-block;
        vertical-align: middle;
        margin-right: 10px;
      }
    
      a[href="/index.xml"] img {
        height: 30px;
      }
    </style>
    
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <p>
   <a href="/docs/dfir/attacks/protocols/asp/"> 👈🏼 Back to </br> 📚 Session, Presentation, Application Layer </a>
  </p>
  <aside>
   <nav id="TableOfContents">
  <ul>
    <li><a href="#ftp">FTP</a>
      <ul>
        <li><a href="#active-mode">Active mode</a>
          <ul>
            <li><a href="#steps">Steps</a></li>
          </ul>
        </li>
        <li><a href="#passive-mode">Passive mode</a>
          <ul>
            <li><a href="#steps-1">Steps</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#-btfm">📘 BTFM</a>
      <ul>
        <li><a href="#-rtfm">📕 RTFM</a></li>
      </ul>
    </li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
 </aside>
</div>



          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">FTP and sFTP</h1>
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="meta">
      
      

      
      

      
    </div>
    
    <b>Created:</b> 16.05.2023
    <br />

    

  </header>


  <div class="content" itemprop="articleBody">
    <p><em>This is about &hellip; .</em></p>
<h2 id="ftp">FTP</h2>
<p><strong>Port 20</strong>: for data exchange
<strong>Port 21</strong>: establishing connection and command channel</p>
<h3 id="active-mode">Active mode</h3>
<p>No firewall in between. The server initiates a connection for data transfer. That means more risk for the client.</p>
<h4 id="steps">Steps</h4>
<p>Client 🐝 opens a port, say, <code>1069</code>.</p>
<p><img src="images/open-ftp-port.png" alt="img"></p>
<p>The client 🐝 then informs the server 🌸 via the <code>PORT 1069</code> command over the server&rsquo;s <code>21</code>st port.</p>
<p><img src="images/port-send.png" alt="img"></p>
<p>The server connects to this port and sends the data from its <code>20</code>th port.</p>
<p><img src="images/data-send.png" alt="img"></p>
<p>Why is it more risky for the client? Because the client 🐝 is open for connections for some time. Most often, the firewall blocks most of the connections not initiated by the client. To allow this mode to work, one must allow the inbound connection, which might be risky. Also, the client 🐝 is sharing its IP address and port number. What if the server is not untrusted? What if these requests are logged somewhere?</p>
<h3 id="passive-mode">Passive mode</h3>
<p>This mode is usually used when the client 🐝 has a firewall that blocks incoming connections. It means less risk for the client and more risk for the server 🌸.</p>
<h4 id="steps-1">Steps</h4>
<p>The client 🐝 sends a <code>PASV</code> to the <code>21</code>st port of the server 🌸 basically saying <em>&ldquo;I want to use the passive mode&rdquo;</em>.</p>
<p><img src="images/rev-1.png" alt="img">
<img src="images/rev-2.png" alt="img"></p>
<p><img src="images/rev-3.png" alt="img"></p>
<p><img src="images/rev-4.png" alt="img"></p>
<h2 id="-btfm">📘 BTFM</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ABOR
</span></span><span class="line"><span class="cl">LIST
</span></span><span class="line"><span class="cl">DELE
</span></span><span class="line"><span class="cl">MKD
</span></span><span class="line"><span class="cl">PWD
</span></span><span class="line"><span class="cl">QUIT
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><h3 id="-rtfm">📕 RTFM</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">brew unlink telnet <span class="c1"># for macOS if the telnet was already installed</span>
</span></span><span class="line"><span class="cl">brew install inetutils
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ftp &lt;IP&gt;
</span></span><span class="line"><span class="cl"><span class="c1"># When prompted for the username, type</span>
</span></span><span class="line"><span class="cl">anonymous
</span></span><span class="line"><span class="cl"><span class="c1"># for password just hit Enter</span>
</span></span><span class="line"><span class="cl"><span class="c1"># on macOS let gftp to accept incoming connection or else you won&#39;t be able to browse the FTP server. The server will respond with 200 PORT command successful. Consider using PASV, then hanging for a while and then puking the 425 Failed to establish connection. message. </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ls <span class="c1"># browse</span>
</span></span><span class="line"><span class="cl">get <span class="c1"># get file</span>
</span></span></code></pre></div><h2 id="references">References</h2>
<details>
    <summary>Expand&hellip;</summary>
    Something here
</details>
  </div>
</article>
</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://www.zerostatic.io">www.zerostatic.io</a></li>
            </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/js/scripts.min.bafc052229b4b40bf03c477d31c5cdd9352ece8afbadf35ab97ed14495098fc9.js"></script>
  

  
  
  
    
  


</body>

</html>
