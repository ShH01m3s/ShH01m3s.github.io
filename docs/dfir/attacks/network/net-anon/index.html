<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📚 Network Anonymity Techniques - Analyst</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://bakerst221b.com/favicon.png">
  <link href="/css/style-classic.css"></link>
  
  
  <link rel="stylesheet" href="/css/style.min.564b5f4faf3af87992cb8ab298314448914c22dbdb3f2f9c584546b21b8d407c.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home 🏡">
      <a href="/">
        <span>Home 🏡</span>
      </a>
    </li>
    
    <li class="menu-item-blog ✍️">
      <a href="/docs/blog">
        <span>Blog ✍️</span>
      </a>
    </li>
    
    <li class="menu-item-dfir 🔍">
      <a href="/docs/dfir">
        <span>DFIR 🔍</span>
      </a>
    </li>
    
    <li class="menu-item-crypto 🗝️">
      <a href="/docs/cryptography">
        <span>Crypto 🗝️</span>
      </a>
    </li>
    
    <li class="menu-item-reverse 🔧">
      <a href="/docs/reverse">
        <span>Reverse 🔧</span>
      </a>
    </li>
    
    <li class="menu-item-toolkit 🧰">
      <a href="/docs/toolkit">
        <span>Toolkit 🧰</span>
      </a>
    </li>
    
    <li class="menu-item-threat hunting 🪤">
      <a href="/docs/thunting">
        <span>Threat Hunting 🪤</span>
      </a>
    </li>
    
    <li class="menu-item-about me 🧝🏽‍♀️">
      <a href="/docs/about">
        <span>About me 🧝🏽‍♀️</span>
      </a>
    </li>
    
    <li class="menu-item-tech reference 📚">
      <a href="/docs/reference">
        <span>Tech Reference 📚</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://bakerst221b.com"><img alt="Logo" src="/images/logo.png" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://bakerst221b.com"><img alt="Logo" src="/images/logo-mobile.svg" /></a>
    </div>
    

    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home 🏡">
      <a href="/">
        <span>Home 🏡</span>
      </a>
    </li>
    
    <li class="menu-item-blog ✍️">
      <a href="/docs/blog">
        <span>Blog ✍️</span>
      </a>
    </li>
    
    <li class="menu-item-dfir 🔍">
      <a href="/docs/dfir">
        <span>DFIR 🔍</span>
      </a>
    </li>
    
    <li class="menu-item-crypto 🗝️">
      <a href="/docs/cryptography">
        <span>Crypto 🗝️</span>
      </a>
    </li>
    
    <li class="menu-item-reverse 🔧">
      <a href="/docs/reverse">
        <span>Reverse 🔧</span>
      </a>
    </li>
    
    <li class="menu-item-toolkit 🧰">
      <a href="/docs/toolkit">
        <span>Toolkit 🧰</span>
      </a>
    </li>
    
    <li class="menu-item-threat hunting 🪤">
      <a href="/docs/thunting">
        <span>Threat Hunting 🪤</span>
      </a>
    </li>
    
    <li class="menu-item-about me 🧝🏽‍♀️">
      <a href="/docs/about">
        <span>About me 🧝🏽‍♀️</span>
      </a>
    </li>
    
    <li class="menu-item-tech reference 📚">
      <a href="/docs/reference">
        <span>Tech Reference 📚</span>
      </a>
    </li>
    
  </ul>
</div>
    
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
    
    <div style="margin-left: 20pt;">
      <a href="/index.xml" type="application/rss+xml">
        <img src="/images/rss.png" alt="RSS Feed">
      </a>
    </div>
    
    <style>
      a[href="/index.xml"] {
        display: inline-block;
        vertical-align: middle;
        margin-right: 10px;
      }
    
      a[href="/index.xml"] img {
        height: 30px;
      }
    </style>
    
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <p>
   <a href="/docs/dfir/attacks/network/"> 👈🏼 Back to </br> 🕸 Network Attacks </a>
  </p>
  <aside>
   <nav id="TableOfContents">
  <ul>
    <li><a href="#vpn">VPN</a>
      <ul>
        <li><a href="#dns-leaks">DNS Leaks</a></li>
      </ul>
    </li>
    <li><a href="#ip-spoofing">IP spoofing</a></li>
    <li><a href="#source-routing">Source routing</a></li>
    <li><a href="#proxies--anonymizers">Proxies / Anonymizers</a></li>
    <li><a href="#tor">TOR</a></li>
    <li><a href="#tcp-fragmentation">TCP fragmentation</a></li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
 </aside>
</div>



          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">📚 Network Anonymity Techniques</h1>
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="meta">
      
      

      
      

      
    </div>
    
    <b>Created:</b> 01.10.2020
    <br />

    

  </header>


  <div class="content" itemprop="articleBody">
    <p>Evasion techniques and what possible forensic footprints they are likely to leave?</p>
<h2 id="vpn">VPN</h2>
<p>Virtual private network. As an additional bonus - avoid bandwidth throttling (when ISP cuts your speed or bandwidth for certain resources like torrents). Also useful on public networks. VPN is like your representative in the Internet or your avatar.</p>
<p>Below are the two examples of using the Internet without a VPN or any other anonymising tool. The first connection (🥕 marked), is just a simple plaintext HTTP connection. The rest (🥒 and 🌽) show a very simplified HTTPS connection. Basically, ISP 🍋  won&rsquo;t see the contents of the message with the SSL/TLS (HTTPS) in use, as well as a MiM, of course (both those that are within 👀🫐  and outside 👀🍆 your network).</p>
<p><img src="images/https-http.png" alt="img"></p>
<p>In order to understand why so, refer to the articles about TLS and SSL and also to the Deffie-Hellman key exchange algorithm (see the Reference section).</p>
<blockquote>
<p>Unlike ISPs, the best VPNs don’t keep logs! (c) [<a href="https://www.firewall.cx/vpn/vpn-guides-articles/1190-anonymous-browsing-secure-your-online-identity.html">1</a>]</p>
</blockquote>
<blockquote>
<p>❗️ Even with a VPN some webtrackers can grap IP information. Many providers protect the users from this by routing all the DNS requests through their DNS server and are resolved by their special service. You can test for this VPN vulnerbility here - <a href="https://dnsleaktest.com/results.html">https://dnsleaktest.com/results.html</a></p>
</blockquote>
<p><strong>OpenVPN</strong>
One of the VPN methods.</p>
<p><strong>L2TP</strong>
One of the VPN methods.</p>
<p><strong>PPTP</strong>
One of the VPN methods.</p>
<p><strong>STTP</strong>
One of the VPN methods.</p>
<h3 id="dns-leaks">DNS Leaks</h3>
<p>Most of the time, we use domain names (<code>www.saucyeggplants.com</code>) instead of IPs (<code>11.22.33.44</code>) to search for and connect to the resources in the Internet. When we do, before connecting to the server in question, we need to look up its IP. DNS servers are responsible for this: they answer a simple question: what&rsquo;s the IP of XXXXX?</p>
<p>It&rsquo;s a good idea since we tend to memorize words better than numbers. However, in case of a VPN connection that could be a problem and here is why.</p>
<p>Suppose a client 🥕 has established a connection with the VPN. Now, 🥕 wants to connect to a pornographic resource banned and illegal in its country (since only naked 🥕 are allowed). 🥕 types <code>www.saucyeggplants.com</code>  in the address bar, and the PC the 🥕 uses, looks up this address in 🍋 IPS&rsquo;s (Internet Provider Service) DNS (domain name service) &ldquo;<em>book&rdquo;</em> 📖.</p>
<p><img src="images/dns-lookup-novpn.png" alt="img"></p>
<p>IPS&rsquo;s DNS server puts this request into logs and looks up for the IP to reply with. Once the IP is found, it&rsquo;s returned to the 🥕. 🥕 is happy and now uses a secure VPN channel to connect to and communicate with the  <code>www.saucyeggplants.com</code>. Do you see a problem here?</p>
<p><img src="images/vpn-with-dns-leak.png" alt="img"></p>
<p>Yes, IPS 🍋  can&rsquo;t see a thing through the encryption blur that the VPN 😎  service has provided for the 🥕. However, the very fact that 🥕 has connected to the 🍆  website can tell a lot. If authorities have a warrant, then they can request IPS logs, including DNS ones. So, even with VPN on 🥕 is in trouble.</p>
<blockquote>
<p>❗️ In UK 🇬🇧  DNS log collection and handover is enforced by <a href="https://www.forbes.com/sites/emmawoollacott/2016/11/16/uk-joins-russia-and-china-in-legalizing-bulk-surveillance/#787c6fd865f4">Investigatory Power Bill</a>.</p>
</blockquote>
<blockquote>
<p>❗️ Some ISP&rsquo;s are now using a technology called &lsquo;Transparent DNS proxy&rsquo;. Using this technology, they will intercept all DNS lookup requests (TCP/UDP port 53) and transparently proxy the results. This effectively forces you to use their DNS service for all DNS lookups (c) [<a href="https://dnsleaktest.com/what-is-transparent-dns-proxy.html">3</a>]</p>
</blockquote>
<p>To see how to prevent DNS leak refer to <a href="https://dnsleaktest.com/how-to-fix-a-dns-leak.html">this</a> page.</p>
<p>How does the DNS leak test work? <em>The DNS leak test works by sending your client a series of domain names to resolve within a specific test domain. Each request is sent from your client to your configured DNS server</em> [<a href="https://dnsleaktest.com">4</a>]. Not yet sure how exactly it works, since there are recursive and non-recursive DNS queries.</p>
<h2 id="ip-spoofing">IP spoofing</h2>
<h2 id="source-routing">Source routing</h2>
<h2 id="proxies--anonymizers">Proxies / Anonymizers</h2>
<h2 id="tor">TOR</h2>
<p>It&rsquo;s also called The Onion Router. But why? Remember Shrek talking about ogres and how they have layers comparing them to onions?</p>
<p><img src="https://media.giphy.com/media/kwafZfFxw8WnC/giphy.gif" alt="img"></p>
<p>I will expand on that later once I have more time. For now, let&rsquo;s say that a packet is encapsulated multiple times and each server on the route can take one layer only. It&rsquo;s like a very sophisticated VPN with multiple servers and multiple layers of encapsulation.</p>
<h2 id="tcp-fragmentation">TCP fragmentation</h2>
<p>Will look like garbage for IDS:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nmap -sS -A -f &lt;target_IP&gt;
</span></span></code></pre></div><h2 id="references">References</h2>
<p>[<a href="https://www.firewall.cx/vpn/vpn-guides-articles/1190-anonymous-browsing-secure-your-online-identity.html">1</a>] About Anonymity on the Internet
[<a href="https://www.firewall.cx/vpn/vpn-guides-articles/1183-dns-leak-protection-testing-prevention.html">2</a>] DNS leaks IPs
[<a href="https://dnsleaktest.com/what-is-transparent-dns-proxy.html">3</a>] Transparent DNS proxies
[<a href="https://dnsleaktest.com">4</a>] How DNS leak test work, DNS Leak Test
[<a href="https://security.stackexchange.com/questions/42752/how-does-dnsleaktest-com-find-my-dns-provider">5</a>] How DNS leak test work, Security Exchange</p>

  </div>
</article>
</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://www.zerostatic.io">www.zerostatic.io</a></li>
            </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/js/scripts.min.302a6fc365d5139fb98cf60bdb8f715d96257ea189161d36c190ccfa8182e569.js"></script>
  

  
  
  
    
  


</body>

</html>
