<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>File Systems Overview - Analyst</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://bakerst221b.com/favicon.png">
  <link href="/css/style-classic.css"></link>
  
  
  <link rel="stylesheet" href="/css/style.min.564b5f4faf3af87992cb8ab298314448914c22dbdb3f2f9c584546b21b8d407c.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home 🏡">
      <a href="/">
        <span>Home 🏡</span>
      </a>
    </li>
    
    <li class="menu-item-blog ✍️">
      <a href="/docs/blog">
        <span>Blog ✍️</span>
      </a>
    </li>
    
    <li class="menu-item-dfir 🔍">
      <a href="/docs/dfir">
        <span>DFIR 🔍</span>
      </a>
    </li>
    
    <li class="menu-item-crypto 🗝️">
      <a href="/docs/cryptography">
        <span>Crypto 🗝️</span>
      </a>
    </li>
    
    <li class="menu-item-reverse 🔧">
      <a href="/docs/reverse">
        <span>Reverse 🔧</span>
      </a>
    </li>
    
    <li class="menu-item-toolkit 🧰">
      <a href="/docs/toolkit">
        <span>Toolkit 🧰</span>
      </a>
    </li>
    
    <li class="menu-item-threat hunting 🪤">
      <a href="/docs/thunting">
        <span>Threat Hunting 🪤</span>
      </a>
    </li>
    
    <li class="menu-item-about me 🧝🏽‍♀️">
      <a href="/docs/about">
        <span>About me 🧝🏽‍♀️</span>
      </a>
    </li>
    
    <li class="menu-item-tech reference 📚">
      <a href="/docs/reference">
        <span>Tech Reference 📚</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://bakerst221b.com"><img alt="Logo" src="/images/logo.png" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://bakerst221b.com"><img alt="Logo" src="/images/logo-mobile.svg" /></a>
    </div>
    

    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home 🏡">
      <a href="/">
        <span>Home 🏡</span>
      </a>
    </li>
    
    <li class="menu-item-blog ✍️">
      <a href="/docs/blog">
        <span>Blog ✍️</span>
      </a>
    </li>
    
    <li class="menu-item-dfir 🔍">
      <a href="/docs/dfir">
        <span>DFIR 🔍</span>
      </a>
    </li>
    
    <li class="menu-item-crypto 🗝️">
      <a href="/docs/cryptography">
        <span>Crypto 🗝️</span>
      </a>
    </li>
    
    <li class="menu-item-reverse 🔧">
      <a href="/docs/reverse">
        <span>Reverse 🔧</span>
      </a>
    </li>
    
    <li class="menu-item-toolkit 🧰">
      <a href="/docs/toolkit">
        <span>Toolkit 🧰</span>
      </a>
    </li>
    
    <li class="menu-item-threat hunting 🪤">
      <a href="/docs/thunting">
        <span>Threat Hunting 🪤</span>
      </a>
    </li>
    
    <li class="menu-item-about me 🧝🏽‍♀️">
      <a href="/docs/about">
        <span>About me 🧝🏽‍♀️</span>
      </a>
    </li>
    
    <li class="menu-item-tech reference 📚">
      <a href="/docs/reference">
        <span>Tech Reference 📚</span>
      </a>
    </li>
    
  </ul>
</div>
    
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
    
    <div style="margin-left: 20pt;">
      <a href="/index.xml" type="application/rss+xml">
        <img src="/images/rss.png" alt="RSS Feed">
      </a>
    </div>
    
    <style>
      a[href="/index.xml"] {
        display: inline-block;
        vertical-align: middle;
        margin-right: 10px;
      }
    
      a[href="/index.xml"] img {
        height: 30px;
      }
    </style>
    
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <p>
   <a href="/docs/dfir/investigation/data-recovery/file-systems/"> 👈🏼 Back to </br> 🗄 File Systems </a>
  </p>
  <aside>
   <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#data-structures-and-flags">Data structures and Flags</a></li>
        <li><a href="#bootcode-and-booting-process">Bootcode and Booting Process</a></li>
        <li><a href="#posix">POSIX</a></li>
      </ul>
    </li>
  </ul>
</nav>
 </aside>
</div>



          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">File Systems Overview</h1>
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="meta">
      
      
      <div class="article-category">
          
            
            
            
            
            
              <i class="fab fa-linux"></i>&nbsp;<i class="fab fa-apple"></i>&nbsp;<i class="fab fa-windows"></i>&nbsp;<i class="fas fa-mobile"></i>
            
            
          
          
      </div> <br />
      

      
      <div class="article-category">
        <i class="fas fa-tools"></i>
          
          
          <a class="platform-link" href="/tools/dd">dd</a> 
          
           , 
          <a class="platform-link" href="/tools/fdisk">fdisk</a> 
          
      </div> <br />
      
      

      
    </div>
    
    <b>Created:</b> 18.10.2020
    <br />

    

  </header>


  <div class="content" itemprop="articleBody">
    <table>
<thead>
<tr>
<th>Name</th>
<th>Partition size (min/max)</th>
<th>Cluster size (min/max)</th>
<th>File Max Size</th>
<th><code>fstab</code> code</th>
</tr>
</thead>
<tbody>
<tr>
<td>FAT16</td>
<td>16Mb/2Gb</td>
<td>2Kb/32Kb</td>
<td></td>
<td></td>
</tr>
<tr>
<td>FAT32</td>
<td>32 KB (officially), 512 bytes (unofficially)- 2Tb 🔍</td>
<td>512b - 32Kb/64Kb (for large volumes)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>NTFS 1.1</td>
<td>500Mb/8Gb 🔍</td>
<td>512B/8Kb</td>
<td></td>
<td></td>
</tr>
<tr>
<td>NTFS 3.0</td>
<td>500Mb/16EB</td>
<td>512B/64Kb</td>
<td></td>
<td></td>
</tr>
<tr>
<td>HFS</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>HFS+</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>APFS</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ext2</td>
<td>16Tb</td>
<td></td>
<td>2Tb</td>
<td><code>ext2</code></td>
</tr>
<tr>
<td>ext3</td>
<td>16Tb</td>
<td></td>
<td>2Tb</td>
<td><code>ext3</code></td>
</tr>
<tr>
<td>ext4</td>
<td>1Eb</td>
<td></td>
<td>16Tb</td>
<td><code>ext4</code></td>
</tr>
<tr>
<td>ReiserFS</td>
<td>16Tb</td>
<td></td>
<td>8Tb</td>
<td><code>resiserfs</code></td>
</tr>
<tr>
<td>JFS</td>
<td>32Pb</td>
<td></td>
<td>4Tb</td>
<td><code>jfs</code></td>
</tr>
<tr>
<td>XFS</td>
<td>16Eb</td>
<td></td>
<td>8Eb</td>
<td><code>xfs</code></td>
</tr>
<tr>
<td>Btrfs</td>
<td>16Eb</td>
<td></td>
<td>16Eb</td>
<td></td>
</tr>
<tr>
<td>HPFS</td>
<td>4Mb-2Tb</td>
<td>512b - 64Kb</td>
<td>2Gb</td>
<td>n/a</td>
</tr>
<tr>
<td>CDFS</td>
<td>up to 700Mb</td>
<td>n/a</td>
<td>700Mb</td>
<td>iso9660</td>
</tr>
<tr>
<td>LFS</td>
<td>depends on the implementation</td>
<td>depends on the implementation</td>
<td>depends on the implementation</td>
<td>depends on the implementation</td>
</tr>
<tr>
<td>NSS</td>
<td>up to 8Tb</td>
<td>up to 64Kb</td>
<td>8Tb</td>
<td>n/a</td>
</tr>
</tbody>
</table>
<p>Other file systems to consider for the exam:</p>
<blockquote>
<p>B. High Performance File System (HPFS)
C. Log-structured file system (LFS) (can be used to install OS)
D. Compact Disc File System (CDFS) (can be used to install OS)
E. Novell Storage Services (NSS)</p>
</blockquote>
<p>ZFS is a file system that was originally developed by Sun Microsystems for the Solaris operating system. It is now available on various platforms including Linux, FreeBSD, and macOS. ZFS is designed to be a highly scalable and robust file system, with support for large storage volumes and advanced features such as data compression, snapshots, and data integrity checking.</p>
<blockquote>
<p>Two entries marked with a🔍  are from M. Graves&rsquo; book &ldquo;Digital Archeaology&rdquo; book. I have not found any other information about max partition size on NTFS 1.1 and FAT32 max partition size is claimed to be 2,048 Gb, which doesn&rsquo;t correlate with other resources.</p>
</blockquote>
<p>There are: file name, file metadata and the contents of the file itself. They are not in the same place. File metadata contains filename and also a ptr to the sector, where the file&rsquo;s contents starts and size of data. Theoretically, we could change the file metadata to make it point to another cluster&hellip; 🤔</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Cluster</th>
<th>size</th>
<th>last accessed</th>
</tr>
</thead>
<tbody>
<tr>
<td>malware.txt</td>
<td>654</td>
<td>80</td>
<td>October 13, 2020</td>
</tr>
</tbody>
</table>
<p><strong>Essential</strong> data - can be trusted and <strong>non</strong>-<strong>essential</strong> cannot. But if ptr to cluster is called essential data, how we can trust it? Well, it&rsquo;s much harder to tamper with.</p>
<p><a href="https://apple.stackexchange.com/questions/321406/extract-hfs-hfsx-volume-from-dmg-file">https://apple.stackexchange.com/questions/321406/extract-hfs-hfsx-volume-from-dmg-file</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">open <span class="o">[</span>path/to/dmg<span class="o">]</span>
</span></span><span class="line"><span class="cl">dd <span class="k">if</span><span class="o">=</span><span class="s2">&#34;/dev/disk[number]&#34;</span> <span class="nv">of</span><span class="o">=</span><span class="s2">&#34;/extract/path/file.img&#34;</span>
</span></span><span class="line"><span class="cl">fdisk -l file.img
</span></span><span class="line"><span class="cl">dd <span class="k">if</span><span class="o">=</span><span class="s2">&#34;path/to/file.img&#34;</span> <span class="nv">bs</span><span class="o">=</span>sector_size <span class="nv">skip</span><span class="o">=</span>sectors <span class="nv">count</span><span class="o">=</span>sectors &gt;&gt; output.hfs
</span></span></code></pre></div><h3 id="data-structures-and-flags">Data structures and Flags</h3>
<p>First, there must be some data structure identifier so that the CPU could know, how to read the subsequent data. For example, if we have the following:</p>
<p><code>1001 1000 1001 1110 1010 1100 1000 101</code></p>
<p>For example, the first 4 bits <code>0101</code> tell the CPU that the next bits should be interpreted as an image. Then, for example, there are other 4 bits <code>0011</code> that are 4 flags. Flag is a 1-bit value, indicating either <code>true</code> or <code>false</code>, or either <code>exists</code> or <code>doesn't</code>. This are flags, for example, that indicate: wether it&rsquo;s black-and-white (<code>0</code>) or colored (<code>1</code>); wether the image is editable <code>1</code> or <code>0</code> etc. And then the file contents.</p>
<p>Consider the above binary sequence. To make it more compressed, convert it to hex: <code>4c 4f 56 45</code>. What is this? That depends. If you tell CPU that it&rsquo;s machine instructions, then it&rsquo;s see this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">dec esp
</span></span><span class="line"><span class="cl">dec edi
</span></span><span class="line"><span class="cl">push esi
</span></span><span class="line"><span class="cl">inc ebp
</span></span></code></pre></div><p>But what if you tell that it&rsquo;s text? Then CPU sees&hellip; check out <a href="https://www.rapidtables.com/convert/number/ascii-to-hex.html">here</a>.</p>
<h3 id="bootcode-and-booting-process">Bootcode and Booting Process</h3>
<h3 id="posix">POSIX</h3>
<p>There is a standard that&rsquo;s called POSIX and those FS that compliant are called POSIX-compliant. This standard demands certain fucntionality and properties from a FS: for example, for a file to have several names or hard links (❓), case sensitive file naming. <a href="#fat">FAT</a> or <a href="https://en.wikipedia.org/wiki/High_Performance_File_System">HPFS</a> are not POSIX compliant.</p>

  </div>
</article>
</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://www.zerostatic.io">www.zerostatic.io</a></li>
            </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/js/scripts.min.302a6fc365d5139fb98cf60bdb8f715d96257ea189161d36c190ccfa8182e569.js"></script>
  

  
  
  
    
  


</body>

</html>
