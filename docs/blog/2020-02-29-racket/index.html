<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Racket notes - Observer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://bakerst221b.com/favicon.png">

  
  
  <link rel="stylesheet" href="/css/style.min.aad43d4ecb69a264f2539b89d7f779d5f3cdff22e7585fe5fc3c77272f1c2696.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-articles">
      <a href="/docs/articles">
        <span>Articles</span>
      </a>
    </li>
    
    <li class="menu-item-blog">
      <a href="/docs/blog">
        <span>Blog</span>
      </a>
    </li>
    
    <li class="menu-item-about me">
      <a href="/docs/about">
        <span>About me</span>
      </a>
    </li>
    
    <li class="menu-item-achievements">
      <a href="/docs/achievements">
        <span>Achievements</span>
      </a>
    </li>
    
    <li class="menu-item-contacts">
      <a href="/docs/contact">
        <span>Contacts</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://bakerst221b.com"><img alt="Logo" src="/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://bakerst221b.com"><img alt="Logo" src="/images/logo-mobile.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-articles">
      <a href="/docs/articles">
        <span>Articles</span>
      </a>
    </li>
    
    <li class="menu-item-blog">
      <a href="/docs/blog">
        <span>Blog</span>
      </a>
    </li>
    
    <li class="menu-item-about me">
      <a href="/docs/about">
        <span>About me</span>
      </a>
    </li>
    
    <li class="menu-item-achievements">
      <a href="/docs/achievements">
        <span>Achievements</span>
      </a>
    </li>
    
    <li class="menu-item-contacts">
      <a href="/docs/contact">
        <span>Contacts</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <h4>Docs</h4>
  <ul>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/articles/mobile/android/fundamentals/activities/">Activities</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/articles/mobile/android/fieldmanuals/btfm/">Btfm Android</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/articles/mobile/android/attacks/ipc-attacks/">IPC Attacks</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2018/04/dot-net-confuser/">.NET Confuser</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2018/07/analytic-protiv-khishnika/">Analytic Protiv Khishnika</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2018/07/undesirable-mail/">Undesirable Mail</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/articles/mobile/android/fieldmanuals/rtfm/">Rtfm Android</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2020/09/how-i-met-hugo/">How I Met Hugo</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/articles/forensics/linux/plan/">Linux</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/articles/forensics/macos/plan/">MacOSX Forensics Plan</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/articles/forensics/memory/plan/">Plan for Memory Forensics</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/articles/forensics/reveng/plan/">Plan for Reverse Engineering</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/articles/forensics/net/plan/">Windows Forensics Plan</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/articles/forensics/win/plan/">Windows Forensics Plan</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2020-06-06-changes-in-java-string/">Changes to String in java (from 1.7.0_06)</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2020-05-01-algorithms-graphs/">Algorithms - Graphs</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2020-04-29-subtyping/">Programming Language - Subtyping</a>
    </li>
    
    <li class="active ">
      <a href="https://bakerst221b.com/docs/blog/2020-02-29-racket/">Racket notes</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2019-12-30-standardml-notes/">Standard ML notes</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2019-03-28-javascript-comparison/">JavaScript Comparison operation at a glance</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2019-03-22-js-tips/">Js tips I can&#39;t remember</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2019-03-08-es6-bind-trick/">Bind specific arguments of a function</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2019-03-08-object-assign-with-accessor-descriptor/">Object.assign() with accessor descriptor</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2019-01-19-vue-navigation-guards/">VueのNavigation Guards</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/blog/2019-01-18-es6/">ES6について</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/articles/mobile/ios/rtfm/"></a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/about/">About me</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/achievements/">Achievements</a>
    </li>
    
    <li class="">
      <a href="https://bakerst221b.com/docs/contact/">Contact</a>
    </li>
    
  </ul>
</div>

          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">Racket notes</h1>
<div class="content ">
  <h2 id="basic">Basic</h2>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="kn">#lang </span><span class="nn">racket</span>
<span class="p">(</span><span class="k">provide</span> <span class="p">(</span><span class="k">all-defined-out</span><span class="p">))</span>

<span class="c1">;this is a comment</span>

<span class="p">(</span><span class="k">define</span> <span class="n">s</span> <span class="s2">&#34;hello&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="k">define</span> <span class="n">x</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="k">define</span> <span class="n">y</span> <span class="p">(</span><span class="nb">+</span> <span class="n">x</span> <span class="mi">2</span><span class="p">))</span>

<span class="p">(</span><span class="k">define</span> <span class="n">cube1</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">*</span> <span class="n">x</span> <span class="p">(</span><span class="nb">*</span> <span class="n">x</span> <span class="n">x</span><span class="p">))))</span>

<span class="p">(</span><span class="k">define</span> <span class="n">cube2</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">*</span> <span class="n">x</span> <span class="n">x</span> <span class="n">x</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">cube3</span> <span class="n">x</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">*</span> <span class="n">x</span> <span class="n">x</span> <span class="n">x</span><span class="p">))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">pow1</span> <span class="n">x</span> <span class="n">y</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="n">=y</span> <span class="mi">0</span><span class="p">)</span>
      <span class="mi">1</span>
      <span class="p">(</span><span class="nb">*</span> <span class="n">x</span> <span class="p">(</span><span class="n">pow1</span> <span class="n">x</span> <span class="p">(</span><span class="nb">-</span> <span class="n">y</span> <span class="mi">1</span><span class="p">)))))</span>

<span class="c1">; currying</span>
<span class="p">(</span><span class="k">define</span> <span class="n">pow2</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="n">y</span><span class="p">)</span>
      <span class="p">(</span><span class="n">pow1</span> <span class="n">x</span> <span class="n">y</span><span class="p">))))</span>

</code></pre></div><h3 id="list">List</h3>
<ul>
<li>Empty list: <code>null</code>
<ul>
<li><code>()</code> doesn&quot;t work for <code>null</code> but <code>'()</code> does</li>
</ul>
</li>
<li>build a list: <code>(list e1 ... en)</code></li>
<li>Constructor: <code>cons</code></li>
<li>Access head of list: <code>car</code></li>
<li>Access tail of list: <code>cdr</code></li>
<li>Check for empty: <code>null?</code></li>
</ul>
<h3 id="syntax">Syntax</h3>
<p>A term is either:</p>
<ul>
<li>An atom like <code>#t, #f, 34, &quot;hi&quot;, null, 4.0, x,...</code></li>
<li>A special form like <code>define, lambda, if</code></li>
<li>A sequence of terms in parentheses: <code>(t1 t2 t3)</code></li>
<li>Can use <code>[</code> anything you use <code>(</code></li>
</ul>
<p>Remember parentheses matters! For example:
<code>(e)</code> means call e with 0 argument.</p>
<h3 id="dynamic-typing">Dynamic typing</h3>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="p">(</span><span class="k">define</span> <span class="n">lst</span> <span class="p">(</span><span class="nb">list</span> <span class="no">#t</span> <span class="s2">&#34;hi&#34;</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)))</span><span class="err">
</span></code></pre></div><h3 id="cond">Cond</h3>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">sum3</span> <span class="n">xs</span><span class="p">)</span>
  <span class="p">(</span><span class="k">cond</span> <span class="p">[(</span><span class="nb">null?</span> <span class="n">xs</span><span class="p">)</span> <span class="mi">0</span><span class="p">]</span>
        <span class="p">[(</span><span class="nb">number?</span> <span class="p">(</span><span class="nb">car</span> <span class="n">xs</span><span class="p">))</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">car</span> <span class="n">xs</span><span class="p">)</span> <span class="p">(</span><span class="n">sum3</span> <span class="p">(</span><span class="nb">cdr</span> <span class="n">xs</span><span class="p">)))]</span>
        <span class="p">[</span><span class="no">#t</span> <span class="mi">0</span><span class="p">]))</span><span class="err">
</span></code></pre></div><h3 id="what-is-true">What is true?</h3>
<p>Anything that is not <code>#f</code> is true <code>#t</code>.</p>
<h3 id="local-bindings">Local bindings</h3>
<h4 id="letletletrec">let/let*/letrec</h4>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="p">(</span><span class="k">let</span> <span class="p">([</span><span class="n">x1</span> <span class="n">e1</span><span class="p">]</span>
      <span class="p">[</span><span class="n">x2</span> <span class="n">e2</span><span class="p">]</span>
      <span class="k">...</span>
      <span class="p">[</span><span class="n">xn</span> <span class="n">en</span><span class="p">])</span>
  <span class="n">e</span><span class="p">)</span><span class="err">
</span></code></pre></div><p>Racket uses the environment <strong>before</strong> the let-expression to evaluate <code>e1 e2 ... en</code>, which means if <code>en</code> uses <code>x1</code>, <code>x2</code>, that would mean some outer variables of the same name. Instead, the expressions in <code>let*</code> are evaluated in the environment produced from the previous bindings (later ones shadow) .</p>
<p>The expressions in <code>letrec</code> are evaluated in the environment that includes all th bindings. It is needed for mutual recursion.</p>
<h3 id="set">set!</h3>
<p>Racket has assignment statements:</p>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="p">(</span><span class="k">set!</span> <span class="n">x</span> <span class="n">e</span><span class="p">)</span><span class="err">
</span></code></pre></div><p>Once you have side-effects, sequences are useful:</p>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="p">(</span><span class="k">begin</span> <span class="n">e1</span> <span class="n">e2</span> <span class="n">e3</span><span class="p">)</span><span class="err">
</span></code></pre></div><h3 id="consmcons">cons/mcons</h3>
<p><code>cons</code> produces pairs or lists. (Actually lists are just extented pairs)</p>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="p">(</span><span class="k">define</span> <span class="n">pr</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">cons</span> <span class="no">#t</span> <span class="s2">&#34;hi&#34;</span><span class="p">)))</span> <span class="c1">; is a pair</span>
<span class="p">(</span><span class="k">define</span> <span class="n">lst</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">cons</span> <span class="no">#t</span> <span class="p">(</span><span class="nb">cons</span> <span class="s2">&#34;hi&#34;</span> <span class="nb">null</span><span class="p">))))</span> <span class="c1">; is a list</span>
</code></pre></div><p><code>mcons</code> is another way to make pairs which allows you to change the value inside piars:</p>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="p">(</span><span class="k">define</span> <span class="n">mpr</span> <span class="p">(</span><span class="nb">mcons</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">mcons</span> <span class="no">#t</span> <span class="s2">&#34;hi&#34;</span><span class="p">)))</span>
<span class="p">(</span><span class="nb">mcar</span> <span class="n">mpr</span><span class="p">)</span> <span class="c1">; 1</span>
<span class="p">(</span><span class="nb">mcdr</span> <span class="n">mpr</span><span class="p">)</span> <span class="c1">; (mcons (#t &#34;hi&#34;))</span>
<span class="p">(</span><span class="nb">set-mcdr!</span> <span class="n">mpr</span> <span class="mi">47</span><span class="p">)</span> <span class="c1">; mpr becomes (mcons 1 47)</span>
</code></pre></div><p>Related form:</p>
<ul>
<li><code>mcons</code></li>
<li><code>mcar</code></li>
<li><code>mcdr</code></li>
<li><code>mpair?</code></li>
<li><code>set-mcar!</code></li>
<li><code>set-mcdr!</code></li>
</ul>
<h2 id="delayed-evaluation-and-thunk">Delayed Evaluation and Thunk</h2>
<p>In most programming languages, given <code>e1 e2 ... en</code>, the function arguments <code>e2, ..., en</code> are evaluated once before the function body is executed.
So if we define a function like:</p>
<div class="highlight"><pre class="chroma"><code class="language-rkt" data-lang="rkt"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">my-if-bad</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="p">)</span> <span class="p">(</span><span class="k">if</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="p">))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">factorial-wrong</span> <span class="n">x</span><span class="p">)</span>
  <span class="p">(</span><span class="n">my-if-bad</span> <span class="p">(</span><span class="nb">=</span> <span class="n">x</span> <span class="mi">0</span><span class="p">)</span>
             <span class="mi">1</span>
             <span class="p">(</span><span class="nb">*</span> <span class="n">x</span> <span class="p">(</span><span class="n">factorial-wrong</span> <span class="p">(</span><span class="nb">-</span> <span class="n">x</span> <span class="mi">1</span><span class="p">)))))</span><span class="err">
</span></code></pre></div><p>if we use <code>if</code> instead of <code>my-if-bad</code>, <code>factorial-wrong</code> acts just like we want. But with <code>my-if-bad</code>, the function never stops because the two branches evaluate at the same time.</p>
<p>Thanks to lambda, we can delay the evaluation, using the fact that function bodies are not evaluated until the function gets called.</p>
<div class="highlight"><pre class="chroma"><code class="language-rkt" data-lang="rkt"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">my-if</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="p">)</span> <span class="p">(</span><span class="k">if</span> <span class="n">x</span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="p">(</span><span class="n">z</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">factorial</span> <span class="n">x</span><span class="p">)</span>
  <span class="p">(</span><span class="n">my-if</span> <span class="p">(</span><span class="nb">=</span> <span class="n">x</span> <span class="mi">0</span><span class="p">)</span>
         <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="mi">1</span><span class="p">)</span>
         <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">*</span> <span class="n">x</span> <span class="p">(</span><span class="n">factorial</span> <span class="p">(</span><span class="nb">-</span> <span class="n">x</span> <span class="mi">1</span><span class="p">))))))</span><span class="err">
</span></code></pre></div><p>The general idiom of using a zero-argument function to delay evaluation is also called a <strong>thunk</strong> (or, thunk the argument).</p>
<p>By the way,</p>
<h2 id="lazy-evaluationcall-by-needpromises">Lazy-evaluation/Call-by-need/Promises</h2>
<h2 id="streams">Streams</h2>
<p>A stream is an infinite sequence of values.</p>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="kn">#lang </span><span class="nn">racket</span>
<span class="c1">; 1 1 1 1 ...</span>
<span class="p">(</span><span class="k">define</span> <span class="n">ones</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">1</span> <span class="n">ones</span><span class="p">)))</span>

<span class="c1">; 1 2 3 4 ...</span>
<span class="p">(</span><span class="k">define</span> <span class="n">nats</span>
  <span class="p">(</span><span class="k">letrec</span> <span class="p">([</span><span class="n">f</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">cons</span> <span class="n">x</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="n">f</span> <span class="p">(</span><span class="nb">+</span> <span class="n">x</span> <span class="mi">1</span><span class="p">)))))])</span>
     <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="n">f</span> <span class="mi">1</span><span class="p">))))</span>

<span class="c1">; 2 4 6 8 ...</span>
<span class="p">(</span><span class="k">define</span> <span class="n">power-of-two</span>
  <span class="p">(</span><span class="k">letrec</span> <span class="p">([</span><span class="n">f</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">cons</span> <span class="n">x</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="n">f</span> <span class="p">(</span><span class="nb">*</span> <span class="n">x</span> <span class="mi">2</span><span class="p">)))))])</span>
    <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="n">f</span> <span class="mi">2</span><span class="p">))))</span>

<span class="c1">; higher-order maker</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">stream-maker</span> <span class="n">fn</span> <span class="n">arg</span><span class="p">)</span>
  <span class="p">(</span><span class="k">letrec</span> <span class="p">([</span><span class="n">f</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">cons</span> <span class="n">x</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="n">f</span> <span class="p">(</span><span class="n">fn</span> <span class="n">x</span> <span class="n">arg</span><span class="p">)))))])</span>
    <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="n">f</span> <span class="n">arg</span><span class="p">))))</span><span class="err">
</span></code></pre></div><h2 id="memoization-not-memorization">Memoization (Not Memorization)</h2>
<p>Memoization is another idiom related to lazy evaluation that does not actually use thunks. To implement memoization we do use mutation: Whenever the function is called with an argument we have not seen before, we compute the answer and then add the result to the table.</p>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="p">(</span><span class="k">define</span> <span class="n">fibonacci</span>
  <span class="p">(</span><span class="k">letrec</span><span class="p">([</span><span class="n">memo</span> <span class="nb">null</span><span class="p">]</span>
          <span class="p">[</span><span class="n">f</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span>
               <span class="p">(</span><span class="k">let</span> <span class="p">([</span><span class="n">ans</span> <span class="p">(</span><span class="nb">assoc</span> <span class="n">x</span> <span class="n">memo</span><span class="p">)])</span>
                 <span class="p">(</span><span class="k">if</span> <span class="n">ans</span>
                     <span class="p">(</span><span class="nb">cdr</span> <span class="n">ans</span><span class="p">)</span>
                     <span class="p">(</span><span class="k">let</span> <span class="p">([</span><span class="n">new-ans</span> <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="k">or</span> <span class="p">(</span><span class="nb">=</span> <span class="n">x</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">=</span> <span class="n">x</span> <span class="mi">2</span><span class="p">))</span>
                                        <span class="mi">1</span>
                                        <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="n">f</span> <span class="p">(</span><span class="nb">-</span> <span class="n">x</span> <span class="mi">1</span><span class="p">))</span>
                                           <span class="p">(</span><span class="n">f</span> <span class="p">(</span><span class="nb">-</span> <span class="n">x</span> <span class="mi">2</span><span class="p">))))])</span>
                       <span class="p">(</span><span class="k">begin</span>
                         <span class="p">(</span><span class="k">set!</span> <span class="n">memo</span> <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nb">cons</span> <span class="n">x</span> <span class="n">new-ans</span><span class="p">)</span> <span class="n">memo</span><span class="p">))</span>
                         <span class="n">new-ans</span><span class="p">)))))])</span>
    <span class="n">f</span><span class="p">))</span><span class="err">
</span></code></pre></div><h2 id="macros">Macros</h2>
<p>Think about these things about macros and how Racket handles them better than other macro systems(notably C/C++)</p>
<ul>
<li>Tokenization</li>
<li>Parenthesization</li>
<li>Scope</li>
</ul>
<h3 id="syntax-1">Syntax</h3>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="p">(</span><span class="k">define-syntax</span> <span class="n">myif</span>
  <span class="p">(</span><span class="k">syntax-rules</span> <span class="p">(</span><span class="n">then</span> <span class="k">else</span><span class="p">)</span>
    <span class="p">[(</span><span class="n">my-if</span> <span class="n">e1</span> <span class="n">then</span> <span class="n">e2</span> <span class="k">else</span> <span class="n">e3</span><span class="p">)</span>
     <span class="p">(</span><span class="k">if</span> <span class="n">e1</span> <span class="n">e2</span> <span class="n">e3</span><span class="p">)]))</span>

<span class="p">(</span><span class="k">define-syntax</span> <span class="n">my-delay</span>
  <span class="p">(</span><span class="k">syntax-rules</span> <span class="p">()</span>
    <span class="p">[(</span><span class="n">my-delay</span> <span class="n">e</span><span class="p">)</span>
     <span class="p">(</span><span class="nb">mcons</span> <span class="no">#f</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="n">e</span><span class="p">))]))</span>

</code></pre></div><h3 id="hygiene">Hygiene</h3>
<h2 id="recursive-datatypes-via-racketss-struct">Recursive Datatypes Via Rackets&rsquo;s <code>struct</code></h2>
<p><a href="https://docs.racket-lang.org/reference/define-struct.html?q=struct#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29">https://docs.racket-lang.org/reference/define-struct.html?q=struct#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29</a></p>
<div class="highlight"><pre class="chroma"><code class="language-racket" data-lang="racket"><span class="p">(</span><span class="k">struct</span> <span class="n">foo</span> <span class="p">(</span><span class="n">bar</span> <span class="n">baz</span> <span class="n">quux</span><span class="p">)</span> <span class="kd">#:transparent</span><span class="err">
</span></code></pre></div>
</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://www.zerostatic.io">www.zerostatic.io</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/js/scripts.min.1237ff71925bb8625c97a9af8db4c54525258bedfd7c47493daaff723bea755e.js"></script>
  

  
  
  
    
  


</body>

</html>
