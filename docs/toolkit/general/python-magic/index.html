<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Python Magic - Analyst</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://bakerst221b.com/favicon.png">
  <link href="/css/style-classic.css"></link>
  
  
  <link rel="stylesheet" href="/css/style.min.b67d7fec5daec98747a80616a05e9e1e96dc0976219c428241762578c5ae69c3.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-articles">
      <a href="/docs/articles">
        <span>Articles</span>
      </a>
    </li>
    
    <li class="menu-item-blog">
      <a href="/docs/blog">
        <span>Blog</span>
      </a>
    </li>
    
    <li class="menu-item-toolkit">
      <a href="/docs/toolkit">
        <span>Toolkit</span>
      </a>
    </li>
    
    <li class="menu-item-about me">
      <a href="/docs/about">
        <span>About me</span>
      </a>
    </li>
    
    <li class="menu-item-achievements">
      <a href="/docs/achievements">
        <span>Achievements</span>
      </a>
    </li>
    
    <li class="menu-item-contacts">
      <a href="/docs/contact">
        <span>Contacts</span>
      </a>
    </li>
    
    <li class="menu-item-notes">
      <a href="/docs/notes">
        <span>Notes</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://bakerst221b.com"><img alt="Logo" src="/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://bakerst221b.com"><img alt="Logo" src="/images/logo-mobile.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-articles">
      <a href="/docs/articles">
        <span>Articles</span>
      </a>
    </li>
    
    <li class="menu-item-blog">
      <a href="/docs/blog">
        <span>Blog</span>
      </a>
    </li>
    
    <li class="menu-item-toolkit">
      <a href="/docs/toolkit">
        <span>Toolkit</span>
      </a>
    </li>
    
    <li class="menu-item-about me">
      <a href="/docs/about">
        <span>About me</span>
      </a>
    </li>
    
    <li class="menu-item-achievements">
      <a href="/docs/achievements">
        <span>Achievements</span>
      </a>
    </li>
    
    <li class="menu-item-contacts">
      <a href="/docs/contact">
        <span>Contacts</span>
      </a>
    </li>
    
    <li class="menu-item-notes">
      <a href="/docs/notes">
        <span>Notes</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <p>
   <a href="/docs/toolkit/general/"> Back to Unsorted Section </a>
  </p>
  <aside>
   <nav id="TableOfContents">
  <ul>
    <li><a href="#challenge">Challenge</a></li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
 </aside>
 </div>



          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">Python Magic</h1>
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="meta">
      
      <div class="article-category">domain: 
          
              
                <i class="fas fa-archive"></i>
              
          <a class="category-link" href="/domain/general">general</a>
          
      </div> <br />
      
      <div class="article-category">doctype:
          
            
              
                <i class="fas fa-book"></i>
              
          <a class="platform-link" href="/doctype/field-manual">field manual</a>
          
      </div> <br /><br/>
      
      
      
      

      
      

      
      <div class="article-tag">
          <i class="fas fa-tag"></i>
          
          
          <a class="tag-link" href="/tags/python" rel="tag">python</a>
          
      </div> 
      
    </div>
  </header>


  <div class="content" itemprop="articleBody">
    <p><em>Beautiful Python üêç, which has so many small blocks of code that ease the task so much! Here is my collection of these building blocks that can be applied to many every day challenges. I am sure some or even all of them might be present in other languages as well, but I don&rsquo;t know other languages equally well, so, pardon my Python üòÑ</em></p>
<h2 id="challenge">Challenge</h2>
<p>Imagine a task. We are given an array (which is actually a list) of dictionaries. Something like a score log (may be a tiny NoSQL DB). For example:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">candidates</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Matt&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Matt&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Mark&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Mark&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>  
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Matt&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Lucie&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Matt&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Matt&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
   <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Lucie&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
   <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Lucie&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
   <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Lucie&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Matt&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Michael&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Matt&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Linda&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Linda&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Michael&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Michael&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Linda&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Mark&#34;</span><span class="p">,</span>
   <span class="s2">&#34;age&#34;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
   <span class="s2">&#34;score&#34;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>  
<span class="p">]</span>
</code></pre></div><p>Each dictionary inside the list contains some information about the compeititor (name and age) and the score, that they have earned. Your task is to find top five champions in the above score table. Well, the easiest approach is to first iterate through this list, put each name in a dictionary, and then whenever we encounter the same competitor, we increment the value. In the end we would have a hash table of competitors with their total scores. To get the top 3 we would sort it and get the first 3 values. Let&rsquo;s see it coded:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">scores_hashtable</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">candidate</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">candidate</span><span class="p">[</span><span class="s2">&#34;name&#34;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">scores_hashtable</span><span class="p">:</span>
        <span class="n">scores_hashtable</span><span class="p">[</span><span class="n">candidate</span><span class="p">[</span><span class="s2">&#34;name&#34;</span><span class="p">]]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">scores_hashtable</span><span class="p">[</span><span class="n">candidate</span><span class="p">[</span><span class="s2">&#34;name&#34;</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">sorted_scores_table</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">scores_hashtable</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">chap</span> <span class="ow">in</span> <span class="n">sorted_scores_table</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;The champion is {} and their score is {}&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chap</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">chap</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div><p>So, we have 5 champions but we need only three of them to be printed. The above is the most straightforward solution. And I have not implemented sorting for a dictionary myself. If.I had, I would get a much bigger code. Because of the <code>sorted</code> the time complexity is going to be <code>O(nlogn)</code>.</p>
<p>Python has this beautiful thing: <code>Counter</code>. It&rsquo;s doing pretty much the same what I was doing when filling <code>scores_hashtable</code> in. Let&rsquo;s substitute this part of the code using <code>Counter</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">scores_hashtable</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="s2">&#34;name&#34;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">])</span>
</code></pre></div><p>Now the code has reduced twice in size:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">scores_hashtable</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="s2">&#34;name&#34;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">])</span>
<span class="n">sorted_scores_table</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">scores_hashtable</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">chap</span> <span class="ow">in</span> <span class="n">sorted_scores_table</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;The champion is {} and their score is {}&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chap</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">chap</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div><p>üóí <em>#todo: about sorted</em>()</p>
<p>Also, this <code>Counter</code> has a useful method <code>most_common</code>. This method takes an integer argument to determine, how much to print. For example, to print top 3 candidates out of 5, we would use the following:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">scores_hashtable</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> 
</code></pre></div><p>As the result, we are having the following code instead of the original solution:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">scores_hashtable</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="s2">&#34;name&#34;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">scores_hashtable</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> 
</code></pre></div><p>Elegant, isn&rsquo;t it?</p>
<p><img src="images/gettyimages-sb10066601b-001-1024x1024.jpg" alt="gettyimages-sb10066601b-001-1024x1024"></p>
<p>I am planning on expnading this article and writing a separate sort of FM for python.</p>
<h2 id="references">References</h2>

  </div>
</article>
</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://www.zerostatic.io">www.zerostatic.io</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/js/scripts.min.1237ff71925bb8625c97a9af8db4c54525258bedfd7c47493daaff723bea755e.js"></script>
  

  
  
  
    
  


</body>

</html>
